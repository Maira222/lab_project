# ğŸ—ï¸ Architecture Diagram

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Internet                               â”‚
â”‚                      (0.0.0.0/0 - HTTP)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Internet Gateway â”‚
                    â”‚   (AWS IGW)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VPC: 10.0.0.0/16                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Public Subnet: 10.0.1.0/24                              â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ â”‚
â”‚  â”‚   â”‚          Security Group: web-sg             â”‚         â”‚ â”‚
â”‚  â”‚   â”‚  â€¢ SSH (22): Your IP only                   â”‚         â”‚ â”‚
â”‚  â”‚   â”‚  â€¢ HTTP (80): 0.0.0.0/0                     â”‚         â”‚ â”‚
â”‚  â”‚   â”‚  â€¢ Internal: All traffic within VPC         â”‚         â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚  â”‚   â”‚     Frontend (Nginx Load Balancer)       â”‚            â”‚ â”‚
â”‚  â”‚   â”‚                                           â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â€¢ Instance: t2.micro                    â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â€¢ Public IP: X.X.X.X                    â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â€¢ Private IP: 10.0.1.Y                  â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â€¢ Port 80: HTTP                         â”‚            â”‚ â”‚
â”‚  â”‚   â”‚                                           â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  Configuration:                          â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â”‚ upstream backend_servers {      â”‚    â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â”‚   server 10.0.1.A:80;          â”‚    â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â”‚   server 10.0.1.B:80;          â”‚    â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â”‚   server 10.0.1.C:80 backup;   â”‚    â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â”‚ }                               â”‚    â”‚            â”‚ â”‚
â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚            â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚  â”‚                      â”‚                                     â”‚ â”‚
â”‚  â”‚                      â”‚ (Proxy Pass)                        â”‚ â”‚
â”‚  â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚ â”‚
â”‚  â”‚            â”‚         â”‚         â”‚                          â”‚ â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚     â”‚  Backend-0 â”‚ â”‚ Backend-1  â”‚ â”‚  Backend-2   â”‚       â”‚ â”‚
â”‚  â”‚     â”‚  (Primary) â”‚ â”‚ (Primary)  â”‚ â”‚  (Backup)    â”‚       â”‚ â”‚
â”‚  â”‚     â”‚            â”‚ â”‚            â”‚ â”‚              â”‚       â”‚ â”‚
â”‚  â”‚     â”‚ Apache     â”‚ â”‚ Apache     â”‚ â”‚ Apache       â”‚       â”‚ â”‚
â”‚  â”‚     â”‚ HTTPD      â”‚ â”‚ HTTPD      â”‚ â”‚ HTTPD        â”‚       â”‚ â”‚
â”‚  â”‚     â”‚            â”‚ â”‚            â”‚ â”‚              â”‚       â”‚ â”‚
â”‚  â”‚     â”‚ Private:   â”‚ â”‚ Private:   â”‚ â”‚ Private:     â”‚       â”‚ â”‚
â”‚  â”‚     â”‚ 10.0.1.A   â”‚ â”‚ 10.0.1.B   â”‚ â”‚ 10.0.1.C     â”‚       â”‚ â”‚
â”‚  â”‚     â”‚            â”‚ â”‚            â”‚ â”‚              â”‚       â”‚ â”‚
â”‚  â”‚     â”‚ Public:    â”‚ â”‚ Public:    â”‚ â”‚ Public:      â”‚       â”‚ â”‚
â”‚  â”‚     â”‚ Y.Y.Y.Y    â”‚ â”‚ Z.Z.Z.Z    â”‚ â”‚ W.W.W.W      â”‚       â”‚ â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Traffic Flow

### Normal Operation (Primary Backends Active)

```
User Request
    â”‚
    â–¼
http://X.X.X.X/
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nginx Frontend  â”‚
â”‚   (Port 80)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Round-Robin Load Balancing
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Backend-0â”‚ â”‚Backend-1â”‚
â”‚(Active) â”‚ â”‚(Active) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Note: Backend-2 is idle (backup)
```

### Failover Mode (Primary Backends Down)

```
User Request
    â”‚
    â–¼
http://X.X.X.X/
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nginx Frontend  â”‚
â”‚   (Port 80)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Failover to Backup
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    âœ—         âœ—
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Backend-0â”‚ â”‚Backend-1â”‚    â”‚Backend-2â”‚
â”‚ (Down)  â”‚ â”‚ (Down)  â”‚    â”‚(Active) â”‚â—„â”€â”€ Serves traffic
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Details

### 1. VPC Configuration
```
Resource: aws_vpc.main
CIDR: 10.0.0.0/16
DNS: Enabled
Features:
  â€¢ Internet Gateway attached
  â€¢ Public subnet
  â€¢ Custom route table
```

### 2. Network Components
```
Internet Gateway:
  â€¢ Enables internet access
  â€¢ Attached to VPC

Route Table:
  â€¢ Default route: 0.0.0.0/0 â†’ IGW
  â€¢ Associated with public subnet

Subnet:
  â€¢ CIDR: 10.0.1.0/24
  â€¢ Type: Public
  â€¢ Auto-assign public IP: Enabled
```

### 3. Security Configuration
```
Security Group: web-sg
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Inbound Rules:                     â”‚
â”‚  â€¢ SSH (22/tcp) from Your IP       â”‚
â”‚  â€¢ HTTP (80/tcp) from 0.0.0.0/0    â”‚
â”‚  â€¢ All traffic from VPC CIDR       â”‚
â”‚                                    â”‚
â”‚ Outbound Rules:                    â”‚
â”‚  â€¢ All traffic to 0.0.0.0/0        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. EC2 Instances

#### Frontend Instance
```
Type: t2.micro
AMI: Amazon Linux 2
Tags:
  Name: lab-frontend
  Type: frontend

Software Stack:
  â€¢ Nginx (reverse proxy)
  â€¢ Configured via Ansible role

Public Access:
  â€¢ SSH: Port 22 (from your IP)
  â€¢ HTTP: Port 80 (from anywhere)
```

#### Backend Instances (x3)
```
Type: t2.micro
AMI: Amazon Linux 2
Tags:
  Name: lab-backend-[0|1|2]
  Type: backend

Software Stack:
  â€¢ Apache HTTPD
  â€¢ Configured via Ansible role

Public Access:
  â€¢ SSH: Port 22 (from your IP)
  â€¢ HTTP: Port 80 (from anywhere)

Private IPs:
  â€¢ Used by Nginx for upstream
```

## Ansible Automation Flow

```
Terraform Apply
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create AWS          â”‚
â”‚ Infrastructure      â”‚
â”‚  â€¢ VPC              â”‚
â”‚  â€¢ Subnet           â”‚
â”‚  â€¢ Security Groups  â”‚
â”‚  â€¢ 4 EC2 Instances  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Generate Dynamic    â”‚
â”‚ Inventory           â”‚
â”‚  â€¢ hosts file       â”‚
â”‚  â€¢ extra_vars.yml   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ null_resource       â”‚
â”‚ triggers Ansible    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
      â”‚         â”‚
      â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend  â”‚ â”‚ Frontend   â”‚
â”‚ Role     â”‚ â”‚ Role       â”‚
â”‚          â”‚ â”‚            â”‚
â”‚ â€¢ Installâ”‚ â”‚ â€¢ Install  â”‚
â”‚   httpd  â”‚ â”‚   nginx    â”‚
â”‚ â€¢ Start  â”‚ â”‚ â€¢ Configureâ”‚
â”‚   serviceâ”‚ â”‚   upstream â”‚
â”‚ â€¢ Deploy â”‚ â”‚ â€¢ Start    â”‚
â”‚   HTML   â”‚ â”‚   service  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Organization

```
Project Root
â”œâ”€â”€ Terraform Layer
â”‚   â”œâ”€â”€ main.tf           â†’ Infrastructure definition
â”‚   â”œâ”€â”€ variables.tf      â†’ Input variables
â”‚   â”œâ”€â”€ outputs.tf        â†’ Output values
â”‚   â”œâ”€â”€ locals.tf         â†’ Local computations
â”‚   â””â”€â”€ templates/        â†’ Dynamic file generation
â”‚
â”œâ”€â”€ Ansible Layer
â”‚   â”œâ”€â”€ ansible.cfg       â†’ Ansible configuration
â”‚   â”œâ”€â”€ playbooks/
â”‚   â”‚   â””â”€â”€ site.yaml     â†’ Main orchestration
â”‚   â””â”€â”€ roles/
â”‚       â”œâ”€â”€ backend/      â†’ HTTPD configuration
â”‚       â”‚   â”œâ”€â”€ tasks/
â”‚       â”‚   â”œâ”€â”€ handlers/
â”‚       â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ frontend/     â†’ Nginx configuration
â”‚           â”œâ”€â”€ tasks/
â”‚           â”œâ”€â”€ handlers/
â”‚           â””â”€â”€ templates/
â”‚
â””â”€â”€ Documentation
    â”œâ”€â”€ README.md         â†’ Project overview
    â”œâ”€â”€ DEPLOYMENT.md     â†’ Deployment guide
    â””â”€â”€ CHECKLIST.md      â†’ Submission checklist
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Terraform Execution                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
         â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS API Calls   â”‚            â”‚ Local File      â”‚
â”‚                 â”‚            â”‚ Generation      â”‚
â”‚ â€¢ create_vpc    â”‚            â”‚ â€¢ hosts         â”‚
â”‚ â€¢ create_subnet â”‚            â”‚ â€¢ extra_vars    â”‚
â”‚ â€¢ create_sg     â”‚            â”‚                 â”‚
â”‚ â€¢ create_ec2    â”‚            â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                               â”‚
         â”‚                               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Wait for EC2    â”‚
                â”‚ Ready (30s)     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Execute Ansible â”‚
                â”‚ Playbook        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
         â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configure       â”‚            â”‚ Configure       â”‚
â”‚ Backend Servers â”‚            â”‚ Frontend Server â”‚
â”‚                 â”‚            â”‚                 â”‚
â”‚ â€¢ Install httpd â”‚            â”‚ â€¢ Install nginx â”‚
â”‚ â€¢ Start service â”‚            â”‚ â€¢ Configure LB  â”‚
â”‚ â€¢ Deploy HTML   â”‚            â”‚ â€¢ Start service â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Network Diagram with IP Addresses

```
External Network (Internet)
        â”‚
        â”‚ HTTP (80)
        â–¼
    [Your Browser]
        â”‚
        â”‚ Request: http://34.X.X.X/
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS Region: us-east-1                   â”‚
â”‚ VPC: 10.0.0.0/16                        â”‚
â”‚                                         â”‚
â”‚  Subnet: 10.0.1.0/24                    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Frontend Nginx                  â”‚   â”‚
â”‚  â”‚ Public: 34.X.X.X                â”‚   â”‚
â”‚  â”‚ Private: 10.0.1.100             â”‚   â”‚
â”‚  â”‚ Port: 80                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚          â”‚                   â”‚
â”‚          â”‚          â”‚ (Internal)        â”‚
â”‚          â”‚          â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”
â”‚  â”‚Backend-0 â”‚  â”‚Backend-1 â”‚  â”‚Backend-2  â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚           â”‚
â”‚  â”‚Pub: 3.Y  â”‚  â”‚Pub: 18.Z â”‚  â”‚Pub: 52.W  â”‚
â”‚  â”‚Pvt:10.0  â”‚  â”‚Pvt:10.0  â”‚  â”‚Pvt: 10.0  â”‚
â”‚  â”‚    .1.10 â”‚  â”‚    .1.20 â”‚  â”‚     .1.30 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  (Primary)     (Primary)      (Backup)    â”‚
â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Transition Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Initial State  â”‚
â”‚  (No Infra)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ terraform apply
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Infrastructure  â”‚
â”‚ Created         â”‚
â”‚ â€¢ VPC           â”‚
â”‚ â€¢ EC2 Instances â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Ansible runs
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Services        â”‚
â”‚ Configured      â”‚
â”‚ â€¢ Nginx         â”‚
â”‚ â€¢ HTTPD         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Healthy
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Stop Backend-0,1
â”‚ Normal Mode     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ 2 Primary     â”‚                        â”‚
â”‚ â€¢ 1 Backup      â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
         â”‚                                 â–¼
         â”‚ Start Backend-0,1      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Failover Mode  â”‚
                                  â”‚ â€¢ Backup Activeâ”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This architecture demonstrates a production-like setup with high availability, automated configuration, and proper separation of concerns through infrastructure as code principles.
